<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8"/>
    <title>Map</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
<style>

/*

*/
  html, body {
      height: 100%;
      margin: 0px;
      padding: 0px;
  }
  
  #map {
      height: 100%;
      background-color: #dff;
  }
  
</style>
  </head>
  <body>
    <h1>Geolocation</h1>
    <dl id="disp"></dl>
<script>

  //  https://kkblab.com/make/javascript/gps.html

  window.addEventListener('DOMContentLoaded', (event) => {

      var disp = document.querySelector("#disp");
      var id;
      var cnt = 0;
      var str = "";

      if(navigator.geolocation) {

	  id = navigator.geolocation.watchPosition((pos) => {
	      console.log(1);
	      var lat = pos.coords.latitude;
	      var lng = pos.coords.longitude;
	      var acc = pos.coords.accuracy;
	      var ts = pos.timestamp;
	      var dt = new Date(ts);

	      var title = ["回数:", "時間:", "緯度:", "経度:", "精度:"];
	      var arr = [(++cnt), dt.toLocaleString(), lat, lng, acc];
	      str = "";
	      for(var i = 0; i < arr.length; i++) {
		  str += "<dt>" + title[i] + "</dt><dd>" + arr[i] + "</dd>";
	      }

	      disp.innerHTML = str;
	      
	  }, (e) => {
	      disp.innerHTML = e.message;
	  }, {
	      enableHighAccuracy: true
	  });
	  
      }else {
	  disp.innerHTML = "<p>not support</p>";
      }

  });

  
</script>

  </body>
</html>
